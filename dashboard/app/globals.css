@tailwind base;
@tailwind components;
@tailwind utilities;

/* Apple 2025 Glassmorphism Design System */

@layer base {
  :root {
    --glass-light: rgba(255, 255, 255, 0.7);
    --glass-medium: rgba(255, 255, 255, 0.5);
    --glass-dark: rgba(255, 255, 255, 0.3);
    --glass-blur: 20px;
    --glass-saturate: 180%;
  }

  * {
    @apply border-border-light;
  }

  body {
    @apply bg-background-primary text-text-primary font-text antialiased;
  }

  html {
    scroll-behavior: smooth;
  }
}

@layer components {
  /* Glassmorphic Card Base */
  .glass-card {
    @apply bg-glass-light;
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    @apply border-[0.5px] border-white/80;
    @apply shadow-glass;
    @apply rounded-apple-xl;
  }

  .glass-card-hover {
    @apply glass-card;
    @apply transition-all duration-300 ease-spring-smooth;
  }

  .glass-card-hover:hover {
    @apply bg-glass-light shadow-glass-hover;
    transform: translateY(-4px);
  }

  /* Glassmorphic Button */
  .glass-button {
    @apply glass-card;
    @apply px-6 py-3;
    @apply text-headline font-semibold;
    @apply transition-all duration-200 ease-spring-snappy;
    @apply active:scale-95;
  }

  .glass-button:hover {
    @apply bg-white/80 shadow-glass-hover;
    transform: translateY(-2px);
  }

  /* Ultra-fine Border */
  .border-ultrafine {
    border-width: 0.5px;
  }

  /* Pulse Animation (Status Indicator) */
  @keyframes pulse-glow {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.1);
    }
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Shimmer Loading Effect */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .animate-shimmer {
    animation: shimmer 2s infinite linear;
    background: linear-gradient(
      to right,
      #f5f5f7 0%,
      #e8e8ea 20%,
      #f5f5f7 40%,
      #f5f5f7 100%
    );
    background-size: 1000px 100%;
  }

  /* Fade In Animation */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Slide In Animation */
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-slide-in {
    animation: slideIn 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Number Counter Animation */
  @keyframes countUp {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-count-up {
    animation: countUp 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
}

@layer utilities {
  /* Text Truncation */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Scrollbar Styling (Apple-like) */
  .scrollbar-apple::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-apple::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-apple::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
  }

  .scrollbar-apple::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
  }

  /* Hide Scrollbar */
  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-none {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Focus Ring (Apple style) */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-background-primary;
  }

  /* Glass Effect Layers */
  .glass-layer-1 {
    @apply bg-white/70;
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }

  .glass-layer-2 {
    @apply bg-white/50;
    backdrop-filter: blur(30px) saturate(200%);
    -webkit-backdrop-filter: blur(30px) saturate(200%);
  }

  .glass-layer-3 {
    @apply bg-white/30;
    backdrop-filter: blur(40px) saturate(220%);
    -webkit-backdrop-filter: blur(40px) saturate(220%);
  }
}

/* Safari-specific fixes */
@supports (-webkit-backdrop-filter: none) or (backdrop-filter: none) {
  .glass-card {
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }
}

/* Print Styles */
@media print {
  .glass-card {
    background: white;
    box-shadow: none;
    border: 1px solid #e5e5e7;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
